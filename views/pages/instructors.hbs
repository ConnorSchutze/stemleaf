{{!-- 
// Citation for the following code:
// Date: 05/24/2024
// Adapted from
// Source URL: https://github.com/osu-cs340-ecampus/nodejs-starter-app
// Description: Used to setup Page Templating
 --}}

<h1>Instructors</h1>
<table id="instructors_table">

    <thead>

        <tr id="headerRow">
            {{#each data.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
            <th>delete</th>
        </tr>
    </thead>

    <tbody>
        {{#each data}}
        <tr data-value={{this.id}}>
            <td class="data">{{this.id}}</td>
            <td class="data">{{this.staff}}</td>
            <td class="data">{{this.course}}</td>
            <td class="data">{{this.bio}}</td>
            <td><button onclick="delete_instructor_id({{this.id}})">Delete</button></td>
        </tr>
        {{/each}}
    </tbody>
</table>
<script src="/js/instructors/delete_instructor.js"></script>

{{!-- Form to search by course --}}
<h2>Search Instructors</h2>
<p>Search by course using the field below. Partial names are OK too!</p>
<form id="search_instructors" method='GET' action='/instructors/'>
    <label for="input_instructors_search">Search by Course Name: </label>
    <input type="text" name="course_name" id="input_instructors_search">
    
    <input type="submit" value="Search">
    <a href='/'><button>Reset</button></a>
</form>

{{!-- Form to add a record to the table  --}}
<h2>Add Instructors</h2>
<p>To add a new Instructor, please enter their information below and click 'Submit'!</p>
<form id="add_instructors_form">
    <label for="input_instructors_staff">Staff: </label>
    <select name="input_staff_id" id="input_instructors_staff_add">
        <option value="">Select a Staff member</option>
        {{#each staff}}
        <option value="{{this.staff_id}}">{{this.first_name}} {{this.last_name}}</option>
        {{/each}}
    </select>
    
    <label for="input_instructors_course">Course: </label>
    <select name="input_course_id" id="input_instructors_course_add">
        <option value="">Select a Course</option>
        {{#each courses}}
        <option value="{{this.course_id}}">{{this.name}}</option>
        {{/each}}
    </select>

    <label for="input_instructors_bio">Staff Bio: </label>
    <input type="text" name="input_staff_bio" id="input_instructors_bio_add">

    <input type="submit" value="Add Instructor">
</form>

{{!-- Embed our javascript to handle the DOM manipulation and AJAX request --}}
<script src="/js/instructors/add_instructor.js"></script>

<h2>Updating Instructors</h2>
<p>To update a specific instructors bio select their name and the course being changed from the drop-down menu</p>
<form id="update_instructor_form">

    <label for="input_instructors_staff_update">Staff: </label>
    <select name="input_staff_id" id="input_instructors_staff_update">
        <option value="">Select a Person</option>
        {{#each staff}}
        <option value="{{this.staff_id}}">{{this.first_name}} {{this.last_name}}</option>
        {{/each}}
    </select>

    <label for="input_instructors_course_update">Course: </label>
    <select name="input_course_id" id="input_instructors_course_update">
        <option value="">Select a Course</option>
        {{#each courses}}
        <option value="{{this.course_id}}">{{this.name}}</option>
        {{/each}}
    </select>

    <label for="input_instructors_bio_update">Staff Bio: </label>
    <input type="text" name="input_staff_bio" id="input_instructors_bio_update">

    <input type="submit" value="Update Instructor">

</form>

<script src="/js/instructors/update_instructor.js"></script>
